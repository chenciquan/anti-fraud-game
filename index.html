<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>反诈小游戏</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 开始页面 -->
    <div id="startScreen" class="screen active">
        <div class="background-container">
            <img src="img/map/background.jpeg" alt="背景图片" class="background-image">
            <div class="overlay"></div>
        </div>
        <div class="content-container">
            <div class="game-slogan">🛡️ 守护钱包 拒绝诈骗 🛡️</div>
            <h1 class="game-title">反诈闯关大挑战</h1>
            <div class="game-info">
                <div class="info-item">
                    <span class="info-icon">🎯</span>
                    <span class="info-text">共有 5 个关卡等你挑战</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">⚡</span>
                    <span class="info-text">识破诈骗套路，成为反诈达人</span>
                </div>
            </div>
            <p class="game-challenge">你准备好了吗？</p>
            <button id="startBtn" class="primary-btn start-game-btn">🚀 开始闯关</button>
        </div>
    </div>

    <!-- 游戏页面 -->
    <div id="gameScreen" class="screen">
        <!-- 场景过渡动画 -->
        <div id="sceneTransition" class="scene-transition">
            <div class="scene-background"></div>
            <div class="scene-name-container">
                <h2 id="sceneNameText" class="scene-name-text"></h2>
            </div>
        </div>
        
        <div class="game-container">
            <!-- 场景标题 -->
            <div class="scenario-header">
                <h2 id="scenarioTitle" class="scenario-title">场景一</h2>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
            </div>

            <!-- 对话区域 -->
            <div id="dialogueContainer" class="dialogue-container">
                <div class="dialogue-box">
                    <div id="dialogueText" class="dialogue-text"></div>
                </div>
            </div>

            <!-- 选择区域 -->
            <div id="choiceContainer" class="choice-container hidden">
                <div class="choice-prompt">请选择你的行动：</div>
                <div id="choiceButtons" class="choice-buttons"></div>
            </div>

            <!-- 继续按钮 -->
            <button id="continueBtn" class="continue-btn hidden">继续</button>
        </div>
    </div>

    <!-- 通关页面 -->
    <div id="victoryScreen" class="screen">
        <div class="victory-background">
            <img src="img/map/jieshu.jpg" alt="通关背景" class="victory-bg-image">
            <div class="victory-overlay"></div>
        </div>
        <div class="victory-container">
            <div class="victory-content-box">
                <div class="victory-icon">🎉</div>
                <h1 class="victory-title">恭喜你通关游戏！</h1>
                <p class="victory-message">你成功识破了所有诈骗陷阱！</p>
                <p class="victory-subtitle">请保持警惕，远离诈骗！</p>
                <div class="victory-reward">
                    <p class="reward-text">🎁 恭喜你，我们为你准备了一些小奖品PU学分！</p>
                </div>
                <button id="submitInfoBtn" class="primary-btn">填写个人信息</button>
            </div>
        </div>
    </div>

    <!-- 信息填写页面 -->
    <div id="submitScreen" class="screen">
        <div class="submit-background">
            <img src="img/map/jieshu.jpg" alt="填写信息背景" class="submit-bg-image">
            <div class="submit-overlay"></div>
        </div>
        <div class="submit-container">
            <div class="submit-content-box">
                <h2 class="submit-title">📝 填写个人信息</h2>
                <p class="submit-subtitle">请填写以下信息以领取PU学分奖励</p>
                <form id="submitForm" class="submit-form">
                    <div class="form-group">
                        <label for="playerName">
                            <span class="label-icon">👤</span>
                            <span>姓名</span>
                        </label>
                        <input type="text" id="playerName" name="playerName" required placeholder="请输入你的姓名">
                    </div>
                    <div class="form-group">
                        <label for="studentId">
                            <span class="label-icon">🎓</span>
                            <span>学号</span>
                        </label>
                        <input type="text" id="studentId" name="studentId" required placeholder="请输入你的学号">
                    </div>
                    <div class="form-group">
                        <label for="className">
                            <span class="label-icon">🏫</span>
                            <span>班级</span>
                        </label>
                        <input type="text" id="className" name="className" required placeholder="请输入你的班级">
                    </div>
                    <button type="submit" class="primary-btn" id="submitBtn">
                        <span id="submitBtnText">提交信息</span>
                        <span id="submitBtnLoading" class="btn-loading hidden">提交中...</span>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- 提交成功页面 -->
    <div id="successScreen" class="screen">
        <div class="success-container">
            <div class="success-content-box">
                <div class="success-icon">✅</div>
                <h1 class="success-title">提交成功！</h1>
                <p class="success-message">感谢你的参与，请保持警惕，远离诈骗！</p>
                <p class="success-subtitle">你的PU学分奖励将稍后发放</p>
                <button id="restartBtn" class="primary-btn">重新开始</button>
            </div>
        </div>
    </div>

    <!-- 失败页面 -->
    <div id="failScreen" class="screen">
        <div class="fail-container">
            <div class="fail-icon">❌</div>
            <h1 class="fail-title">很遗憾，你被诈骗了！</h1>
            <p id="failMessage" class="fail-message"></p>
            <button id="retryBtn" class="primary-btn">重新作答</button>
        </div>
    </div>

    <!-- LeanCloud SDK -->
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.15.2/dist/av-min.js"></script>
    
    <script src="game.js"></script>
</body>
</html>

